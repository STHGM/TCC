%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CAPÍTULO 5
\chapter{RESULTADOS E DISCUSSÕES} 

Este capítulo apresentará os resultados mais relevantes das comparações. É categorizado por tipo de \emph{collider}e depois por tipo de cenário (\emph{Pre-Runtime} e \emph{Runtime}).

A maioria dos resultados com poucos objetos no cenário, ou seja, com um e dez objetos, não apresentaram grandes diferenças entre si em questão de performance que pudessem intervir na jogabilidade. Em todas as comparações, os cálculos da física dos objetos foram os que mais consumiram recursos, que foram aumentando conforme o aumento do número de objetos na cena dependendo do tipo de \emph{collider} usado, como pode ser encontrado nos Anexos.

\section{Resultados com \emph{Box Collider}}

Nesta seção são apresentados os resultados com o \emph{collider} do tipo \emph{box}.

\subsection{\emph{Box Collider - Pre-Runtime}}

Os resultados apresentaram uma progressão linear conforme o número de objetos foi aumentando com pequenas variações. Nos três primeiros testes com um, dez e cinquenta objetos, os resultados se mostram com performance estável, sem queda bruscas de quadros e sem uso intensivo de CPU e de memória RAM.

A partir de cem objetos, apesar de ainda não haver uso intenso de memória e CPU que afetem a jogabilidade, é possível perceber picos de \emph{Garbage Collection}. Esses picos começam a afetar a performance a partir dos quinhentos objetos, fazendo com que o uso total de CPU para calcular os quadros chega a 16 ms como mostrado na Figura \ref{teste_box_10}, onde antes era de 0.25 ms a 1 ms, mostrado na Figura \ref{teste_box_500}.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Box/new/0010_Static.png}
	\caption[Resultado 10 Objetos Box Static]{Resultado de performance de dez objetos com \emph{box collider} em \emph{Pre-Runtime}.}
	\label{teste_box_10}
\end{figure}

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Box/new/0500_Static.png}
	\caption[Resultado 500 Objetos Box Static]{Resultado de performance de quinhentos objetos com \emph{box collider} em \emph{Pre-Runtime}.}
	\label{teste_box_500}
\end{figure}

O resultado com mil objetos foi o mais instável, apresentando um aumento de consumo apenas certo tempo depois do início da execução, chegando a fazer o tempo de consumo total de CPU chegar a 66 ms e 0.65GB de uso total de memória RAM (em comparação com a margem de 200MB de RAM nos resultados anteriores) como mostrado na Figura \ref{teste_box_1000}.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Box/new/1000_Static.png}
	\caption[Resultado 1000 Objetos Box Static]{Resultado de performance de mil objetos com \emph{box collider} em \emph{Pre-Runtime}.}
	\label{teste_box_1000}
\end{figure}

\subsection{\emph{Box Collider - Runtime}}

Nos três primeiros testes com um, dez e cinquenta objetos por segundo, os resultados se mostram com performance estável, porém com picos de \emph{Garbage Collection} contantes conforme os objetos eram invocados pelo script de invocação. O consumo total de memória RAM mostra ser menor do que os resultados em \emph{Pre-Runtime}.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Box/new/0010_Dynamic.png}
	\caption[Resultado 10 Objetos Box Dynamic]{Resultado de performance de dez objetos com \emph{box collider} em \emph{Runtime}.}
	\label{teste_box_0010_dynamic}
\end{figure}

A partir de cem objetos por segundo, há uma queda brusca de performance. Foi gerada uma alta quantidade de \emph{Garbage Collection}, taxa de uso de CPU passou o limite de 66 ms e 1.64GB de RAM total, como pode ser mostrado na Figura \ref{teste_box_100_dynamic}, o que afeta bastante a performance, a visualização e estabilidade do jogo. As demais comparações seguintes dessa subseção apresentaram resultados semelhantes, com o aumento de consumo após pouco tempo de execução.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Box/new/0100_Dynamic.png}
	\caption[Resultado 100 Objetos Box Dynamic]{Resultado de performance de quinhentos objetos com \emph{box collider} em \emph{Runtime}.}
	\label{teste_box_100_dynamic}
\end{figure}

\section{Resultados com \emph{Circle Collider}}

\subsection{\emph{Circle Collider - Pre-Runtime}}

Assim como nos resultados de \emph{box collider}, as três primeiras comparações se mostraram estáveis nas suas medidas, com tempo de uso de CPU entre 0.25 ms e 1 ms e consumo total de memória RAM em cerca de 250 MB como mostrado na Figura \ref{teste_circle_0050_static}.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Circle/new/0050_Static.png}
	\caption[Resultado 0050 Objetos Circle Static]{Resultado de performance de cinquenta objetos com \emph{circle collider} em \emph{Pre-Runtime}.}
	\label{teste_circle_0050_static}
\end{figure}

A partir de 100 objetos em diante, o resultado mostra o início de picos de \emph{Garbage Collection}, que aumentam drasticamente de acordo com o número de objetos na cena. No entanto, com mil objetos, o resultado se mostra estável no início, porém com o aumento de colisões entre os objetos, a quantidade de \emph{Garbage Collection} aumenta, como mostrado na Figura \ref{teste_circle_1000_static}, deixando a performance relativamente baixa. Ela mostra-se melhor do que a mesma situação com \emph{box collider}. Logo em seguida, o \emph{Garbage Collection} diminui, e a performance se estabiliza. O \emph{circle collider} apresentou mais \emph{Garbage Collection} que o \emph{box collider}.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Circle/new/1000_Static.png}
	\caption[Resultado 1000 Objetos Circle Static]{Resultado de performance de mil objetos com \emph{circle collider} em \emph{Pre-Runtime}.}
	\label{teste_circle_1000_static}
\end{figure}

\subsection{\emph{Circle Collider - Runtime}}

Segue os mesmos padrões de resultado de \emph{box collider}. porém, os picos de \emph{Garbage Collection} só se tornam mais presentes a partir de 50 objetos por segundo na cena. E até esse ponto, o resultado ainda se mostra estável, com consumo de CPU variando de 1 ms a 5 ms e memória RAM total em cerca de 240 MB, como mostrado na Figura \ref{teste_circle_0050_dynamic}.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Circle/new/0050_Dynamic.png}
	\caption[Resultado 0050 Objetos Circle Dynamic]{Resultado de performance de cinquenta objetos com \emph{circle collider} em \emph{Runtime}.}
	\label{teste_circle_0050_dynamic}
\end{figure}

A partir de cem objetos por segundo, os resultados se assemelham aos cenários com \emph{box collider}, com exceção do consumo total de memória RAM, que teve um aumento significativo de 240 MB com cinquenta objetos, para 1.5 GB, como mostrado na Figura \ref{teste_circle_0100_dynamic}. No entanto, os resultados seguintes mostram consumo de total memória RAM semelhante ao próprio, mesmo com o aumento do número de objetos.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Circle/new/0100_Dynamic.png}
	\caption[Resultado 0100 Objetos Circle Dynamic]{Resultado de performance de cem objetos com \emph{circle collider} em \emph{Runtime}.}
	\label{teste_circle_0100_dynamic}
\end{figure}

\section{Resultados com \emph{Edge Collider}}

\subsection{\emph{Edge Collider - Pre-Runtime}}

Os resultados com esse tipo de \emph{collider} mostraram-se estáveis em todos os cenários, tendo baixo consumo de processamento, que com mil objetos chegou a 1 ms, e uso total de memória RAM com pouca variação em comparação com os outros \emph{colliders}, variando entre 250 MB e 350 MB para até 500 objetos, e cerca de 450 MB para mil objetos como demonstrado pela Figura \ref{teste_edge_1000_static}.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Circle/new/1000_Static.png}
	\caption[Resultado 1000 Objetos Edge Static]{Resultado de performance de mil objetos com \emph{edge collider} em \emph{Pre-Runtime}.}
	\label{teste_edge_1000_static}
\end{figure}

No entanto foi o que demonstrou a menor precisão em como as colisões ocorrem. Os objetos, mesmo com \emph{rigid body}, se sobrepunham uns entre os outros. Além disso, como esse tipo de \emph{collider} consiste de uma linha contínua, não é apropriado para o uso de personagens ou objetos que requerem uma interação mais dinâmica. Esse tipo de \emph{collider} é mais apropriado para terrenos e plataformas que não requerem uma interação além de uma parte da superfície. Outro problema observado pelo uso de muitos objetos com \emph{edge collider} na mesma cena é que alguns deles podem atravessar outros objetos, mesmo estando com \emph{rigidbody}. Esses problemas podem ser vistos por meio da Figura \ref{teste_edge_1000_static_artifact}

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Edge/new/1000_Static_Artifact.png}
	\caption[Problemas 1000 Objetos Edge Static Artifact]{Problemas de colisão causados pelo uso do tipo \emph{edge collider} em \emph{Pre-Runtime}.}
	\label{teste_edge_1000_static_artifact}
\end{figure}

\subsection{\emph{Edge Collider - Runtime}}

Os resultados nessa categoria mostraram-se estáveis em seu percurso, tendo mais performance do que os resultados em \emph{Pre-Runtime}. Com mil objetos por segundo, o tempo de uso de CPU ficou entre 5 ms e 10 ms, e consumo total de memória RAM em cerca de 320 MB, como mostra a Figura . Picos de \emph{Garbage Collection} começam a ser mais frequentes a partir de cem objetos por segundo.

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.75\textwidth]{./Figuras/Testes/Edge/new/1000_Dynamic.png}
	\caption[Resultado 1000 Objetos Edge Dynamic]{Resultado de performance de mil objetos com \emph{edge collider} em \emph{Runtime}.}
	\label{teste_edge_1000_dynamic}
\end{figure}